در Docker، **Control Group** یا به اختصار **cgroup**، مکانیزمی است که امکان مدیریت و محدودسازی منابع سیستم (مانند پردازنده، حافظه، دیسک و شبکه) را برای کانتینرها فراهم می‌کند. این قابلیت به کاربران Docker اجازه می‌دهد منابعی را که هر کانتینر می‌تواند مصرف کند، محدود کرده و مدیریت کنند. 

به بیان دیگر، **cgroup** به شما کمک می‌کند تا مطمئن شوید که یک کانتینر خاص نمی‌تواند منابع بیش از حدی از سیستم میزبان استفاده کند و در نتیجه عملکرد سایر کانتینرها یا خود سیستم را تحت تاثیر قرار دهد. cgroup از ویژگی‌های اصلی کرنل لینوکس است و Docker از این قابلیت به‌طور گسترده برای مدیریت منابع در کانتینرها استفاده می‌کند.

### وظایف و کاربردهای cgroup در Docker

1. **محدودیت مصرف CPU**:
   - می‌توان تنظیم کرد که هر کانتینر چه میزان از CPU را استفاده کند. به عنوان مثال، اگر سیستم شما چندین هسته پردازشی داشته باشد، می‌توانید مشخص کنید که یک کانتینر خاص تنها از یک هسته استفاده کند یا فقط درصد معینی از قدرت پردازشی را مصرف کند.

2. **محدودیت مصرف حافظه (RAM)**:
   - می‌توانید مقدار رم قابل استفاده برای هر کانتینر را محدود کنید. اگر یک کانتینر از این مقدار بیشتر استفاده کند، فرآیندهای داخل آن توسط Docker خاتمه داده می‌شوند. این کار به جلوگیری از مشکلات ناشی از مصرف بیش از حد حافظه توسط یک کانتینر کمک می‌کند.

3. **محدودیت I/O دیسک**:
   - cgroup می‌تواند میزان خواندن و نوشتن روی دیسک را کنترل کند، به طوری که هر کانتینر نتواند از پهنای باند I/O بیش از حد استفاده کند.

4. **محدودیت مصرف شبکه**:
   - با استفاده از cgroup، می‌توان میزان مصرف پهنای باند شبکه توسط هر کانتینر را نیز محدود کرد.

5. **اولویت‌بندی منابع**:
   - با استفاده از cgroup می‌توان اولویت‌های استفاده از منابع را مشخص کرد. این کار به کانتینرهای خاصی اجازه می‌دهد تا دسترسی بهتری به منابع داشته باشند، حتی زمانی که سایر کانتینرها مشغول به کار هستند.

### نحوه استفاده از cgroup در Docker

در Docker، می‌توانید از طریق دستورات زیر منابع یک کانتینر را محدود کنید:

- برای محدود کردن CPU:
  ```bash
  docker run --cpus=".5" my_container
  ```

- برای محدود کردن حافظه:
  ```bash
  docker run -m 512m my_container
  ```

- برای محدود کردن I/O دیسک:
  ```bash
  docker run --device-write-bps /dev/sda:1mb my_container
  ```

به کمک cgroup و این قابلیت‌ها، می‌توان از تخصیص بهینه منابع در محیط‌هایی با بار کاری سنگین و کانتینرهای متعدد اطمینان حاصل کرد.



**Freezer** یکی از زیرسیستم‌های cgroup در کرنل لینوکس است که به فرآیندهای در حال اجرا اجازه می‌دهد **به‌طور موقت متوقف** (فریز) یا **دوباره ادامه پیدا کنند** (آن‌فریز). در Docker، این قابلیت برای **ایزوله‌سازی و کنترل دقیق‌تر کانتینرها** استفاده می‌شود و می‌تواند برای توقف موقت کانتینرها به کار برود، بدون اینکه وضعیت حافظه یا پردازش‌های آن‌ها تغییر کند. 

### کاربردهای Freezer در Docker

1. **مدیریت و توقف موقت کانتینرها**:
   - Freezer به شما امکان می‌دهد تا یک کانتینر را برای مدت کوتاهی متوقف کنید و سپس دوباره آن را ادامه دهید. این کار بدون تغییر یا پاک شدن وضعیت حافظه، پردازش‌ها و فایل‌های باز داخل کانتینر انجام می‌شود.

2. **دیباگ و مانیتورینگ**:
   - در زمان دیباگ و بررسی کانتینرها، Freezer به مدیر سیستم اجازه می‌دهد کانتینر را به حالت فریز درآورد، وضعیت آن را بررسی کند و سپس دوباره به آن اجازه ادامه دهد.

3. **کنترل منابع در زمان اوج مصرف**:
   - در مواردی که نیاز به کاهش مصرف منابع دارید، می‌توانید برخی از کانتینرها را به‌طور موقت متوقف کنید تا منابع سیستم آزاد شوند و پس از کاهش بار کاری، دوباره کانتینرها را به حالت عادی برگردانید.

### نحوه استفاده از Freezer در Docker

در Docker، این کار را می‌توان با دستوراتی مشابه زیر انجام داد:
  
- برای **متوقف کردن** (فریز کردن) یک کانتینر:
  ```bash
  docker pause my_container
  ```

- برای **ادامه دادن** (آن‌فریز کردن) یک کانتینر:
  ```bash
  docker unpause my_container
  ```

به‌طور کلی، Freezer به مدیران سیستم اجازه می‌دهد کانتینرها را با کنترل بیشتری مدیریت کنند، آن‌ها را متوقف و دوباره راه‌اندازی کنند، و منابع سیستم را بهینه‌تر تخصیص دهند.
