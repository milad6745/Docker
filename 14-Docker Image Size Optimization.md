ฺฉุงูุด ุญุฌู ฺฉ **ุงูุฌ ุฏุงฺฉุฑ (Docker Image)** ฺฉ ุงุฒ ูููโุชุฑู ูุฑุงุญู ุจูููโุณุงุฒ ุฏุฑ ุชูุณุนู ู ุฏูพูู ุงูพูฺฉุดูโูุง ุงุณุช. ุฏุฑ ุงุฏุงูู **ุชูุงู ุฑุงูฺฉุงุฑูุง ููุซุฑ ู ุนูู** ุจุฑุง ฺฉุงูุด ุญุฌู ุงูุฌโูุง Docker ุฑุง ุจูโุตูุฑุช ุทุจููโุจูุฏโุดุฏู ุงุฑุงุฆู ูโุฏูู:

---

## ๐งฑ 1. ุงูุชุฎุงุจ ูพุงู (Base Image) ููุงุณุจ

ุจุฒุฑฺฏโุชุฑู ุนุงูู ุฏุฑ ุญุฌู ุงููู ุงูุฌุ **Base Image** ุงุณุช.

### ุฑุงูฺฉุงุฑูุง:

* ุงุณุชูุงุฏู ุงุฒ **`alpine`** ุจูโุฌุง ุงูุฌโูุง ูุนููู (ูุซู `ubuntu` ุง `debian`):

  ```Dockerfile
  FROM node:alpine
  ```
* ุจุฑุฑุณ ูุงุฒูุง ุงูพูฺฉุดูุ ุงฺฏุฑ ุจู ุงุจุฒุงุฑูุง ุฒุงุฏ ูุงุฒ ูุฏุงุฑุฏุ `alpine` ุจูุชุฑู ฺฏุฒูู ุงุณุช (ุญุฏูุฏ 5MB).
* ุงุฒ ุงูุฌโูุง **slim** ุงุณุชูุงุฏู ฺฉูุฏ (ูุซู `python:3.11-slim`).

---

## ๐ฆ 2. ฺูุฏ ูุฑุญููโุง (Multi-stage Build)

ุจุง ุงุณุชูุงุฏู ุงุฒ **multi-stage builds** ูโุชูุงูุฏ ุจุฎุด Build ู Runtime ุฑุง ุงุฒ ูู ุฌุฏุง ฺฉูุฏ.

### ูุซุงู:

```Dockerfile
# ูุฑุญูู ุงูู - ฺฉุงููพุงู ู ุณุงุฎุช
FROM golang:1.21-alpine AS builder
WORKDIR /app
COPY . .
RUN go build -o myapp

# ูุฑุญูู ุฏูู - ููุท ุจุงูุฑ ููุง
FROM alpine:latest
WORKDIR /app
COPY --from=builder /app/myapp .
CMD ["./myapp"]
```

๐ฝ ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดูุฏ ูุงูโูุง buildุ compilerุ ู dependencyูุง ุบุฑุถุฑูุฑ ูุงุฑุฏ ุงูุฌ ููุง ูุดููุฏ.

---

## ๐ฅ 3. ุญุฐู ูุงูโูุง ู ฺฉุดโูุง ูููุช

ุจุนุฏ ุงุฒ ูุตุจ ุง buildุ ูุงูโูุง ูููุช ุฑุง ุญุฐู ฺฉูุฏ.

### ูุซุงู:

```Dockerfile
RUN apt-get update && apt-get install -y some-package \
 && rm -rf /var/lib/apt/lists/*
```

---

## ๐งน 4. ูุดุฑุฏูโุณุงุฒ ูุงูโูุง

ูุฑ ุฏุณุชูุฑ ุฏุฑ Dockerfile ฺฉ ูุงู ุงุฌุงุฏ ูโฺฉูุฏ. ุงุณุชูุงุฏูโ ุฒุงุฏ ุงุฒ `RUN`, `COPY`, `ADD` ุจุงุนุซ ุงูุฒุงุด ุญุฌู ูโุดูุฏ.

### ุฑุงูฺฉุงุฑ:

* **ุฏุณุชูุฑูุง ุชุฑฺฉุจ ุจููุณุฏ**:

  ```Dockerfile
  RUN apt-get update && apt-get install -y curl git && rm -rf /var/lib/apt/lists/*
  ```

---

## ๐งฑ 5. ููุท ูุงูโูุง ููุฑุฏูุงุฒ ุฑุง ฺฉูพ ฺฉูุฏ

ุงุฒ `.dockerignore` ุจุฑุง ุฌููฺฏุฑ ุงุฒ ฺฉูพ ุดุฏู ูุงูโูุง ุบุฑุถุฑูุฑ ุงุณุชูุงุฏู ฺฉูุฏ.

### ูุซุงู:

`.dockerignore`:

```
.git
node_modules
*.log
.env
```

---

## ๐ช 6. ุงุณุชูุงุฏู ุงุฒ ุจุงูุฑโูุง ุงุณุชุงุชฺฉ ู Minify ุดุฏู

ุจุฑุง ุฒุจุงูโูุง ูุซู Goุ Rustุ C++:

* ุจุงูุฑ ุฑุง ุจุง `strip` ฺฉูฺฺฉ ฺฉูุฏ.
* ุจุงูุฑ statically compiled ุจุณุงุฒุฏ ุชุง ุจู ุฏุงูุงูฺฉ ููฺฉ ูุงุฒ ูุฏุงุดุชู ุจุงุดุฏ.

---

## ๐ 7. ุญุฐู dependencyูุง dev

ูุซูุงู ุฏุฑ Node.js:

```Dockerfile
RUN npm install --production
```

ุง ุจุฑุง Python:

```Dockerfile
RUN pip install -r requirements.txt --no-cache-dir
```

---

## ๐ 8. ุจุฑุฑุณ ุณุงุฒ ูุงูโูุง ุจุง ุงุจุฒุงุฑูุง

### ุงุจุฒุงุฑูุง ูพุดููุงุฏ:

* [`dive`](https://github.com/wagoodman/dive): ุจุฑุฑุณ ูุงู ุจู ูุงู ุงูุฌ
* `docker image history <image>`: ุชุงุฑุฎฺู ูุงูโูุง

---

## ๐งฌ 9. ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑูุง Build ูพุดุฑูุชู

### ูุซู:

* **BuildKit**:

  ```bash
  DOCKER_BUILDKIT=1 docker build .
  ```

  ุณุฑุนโุชุฑุ ุจูููโุชุฑ ู ุจุง ฺฉุด ุจูุชุฑ.

* **docker-slim**: ูุดุฑุฏูโุณุงุฒ ุฎูุฏฺฉุงุฑ ุงูุฌโูุง

  ```bash
  docker-slim build your-image
  ```

---

## ๐๏ธ 10. ูุงูโูุง ุชูุธูุงุช ู ุงุณฺฉุฑูพุชโูุง ูุตุจ ุฑุง ุชูุฒ ฺฉูุฏ

ูุซูุงู ุงฺฏุฑ ุงุฒ bash scripts ุง ูุงู config ูููุช ุงุณุชูุงุฏู ูโฺฉูุฏุ ุฏุฑ ูพุงุงู ุญุฐูุดุงู ฺฉูุฏ.

---

## ๐ง 11. ุจูโุฑูุฒุฑุณุงู ุงูุฌ ู ูพุงฺฉโุณุงุฒ ุจุณุชูโูุง

ุงุฒ ุขูพุฏุช ุจโููุฑุฏ base image ุงุฌุชูุงุจ ฺฉูุฏ ูฺฏุฑ ุงูฺฉู ูุงุฒู ุจุงุดุฏุ ุงฺฏุฑ ูุงุฒู ุงุณุช:

```Dockerfile
RUN apt-get update && apt-get upgrade -y && apt-get clean && rm -rf /var/lib/apt/lists/*
```

---

## โ ุฌูุนโุจูุฏ

| ุฑูุด                             | ุชุฃุซุฑ | ุชูุถุญ                         |
| ------------------------------- | ----- | ----------------------------- |
| ุงุณุชูุงุฏู ุงุฒ `alpine`             | โญโญโญโญ  | ุงูุฌ ุจุณุงุฑ ุณุจฺฉ               |
| Multi-stage Build               | โญโญโญโญโญ | ุณุงุฎุช ุญุฑููโุง ู ุชูุฒ           |
| ุงุณุชูุงุฏู ุงุฒ `.dockerignore`      | โญโญโญ   | ุฌููฺฏุฑ ุงุฒ ฺฉูพ ูุงูโูุง ุงุถุงู |
| ูุดุฑุฏูโุณุงุฒ ูุงูโูุง              | โญโญ    | ฺฉุงูุด ูุงูโูุง ุญุฌู            |
| ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑ `dive`, `slim` | โญโญโญโญ  | ุชุญูู ู ฺฉุงูุด ุณุงุฒ ุฏูู        |
| ุญุฐู ฺฉุด ู ูุงูโูุง ูููุช         | โญโญโญ   | ุญุฐู ูุงูโูุง ุบุฑุถุฑูุฑ         |

---

ุงฺฏุฑ ูุงู ุจุงุดุฏุ ูโุชูุงูู ฺฉ ูุณุฎู ุณุจฺฉ ุดุฏู ุงุฒ Dockerfile ูุนูโุชุงู ุฑุง ูุฒ ุจุงุฒููุณ ฺฉูู. ููุท ฺฉุงูุณุช ุขู ุฑุง ุจูุฑุณุชุฏ.
